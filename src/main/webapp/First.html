<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" id="themes" href="Resources/Style/themes/bootstrap/easyui.css">
    <link rel="stylesheet" type="text/css" href="Resources/Style/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="Resources/Style/themes/color.css">
    <link rel="stylesheet" type="text/css" href="Resources/Style/style.css">

    <script type="text/javascript" src="Resources/JScript/jquery.min_1.4.2.js"></script>
    <script type="text/javascript" src="Resources/JScript/jquery.easyui.min_1.4.2.js"></script>
    <script type="text/javascript" src="Resources/JScript/comm.js"></script>
    <script type="text/javascript" src="Resources/JScript/easyui-lang-zh_CN.js"></script>

    <title></title>
</head>
<body>
	<h2>Complex Toolbar on Dialog</h2>
	<p>This sample shows how to create complex toolbar on dialog.</p>
	
	<div id="panel_truck" class="easyui-panel" >
		<a id="open" href="javascript:void(0)" class="easyui-linkbutton" onclick="div_next();">hide</a>
		<a id="open" href="javascript:void(0)" class="easyui-linkbutton" onclick="div_show();">show</a>
		<div id="div_truck_1" style="background-color: #fff000;" >1</div>
		<div id="div_truck_2" style="background-color: #000aaa;" hidden>2</div>
		<div id="div_truck_3" style="background-color: #aaafff;" hidden>3</div>
	</div>
	<div style="margin:20px 0;">
		<a id="open" href="javascript:void(0)" class="easyui-linkbutton" onclick="open_win();">Open</a>
		<a href="javascript:void(0)" class="easyui-linkbutton" onclick="$('#dlg').dialog('close')">Close</a>
	</div>
	<div id="dlg" class="easyui-dialog"  title="Complex Toolbar on Dialog" style="width:400px;height:170px;"
			data-options="closed: true,
				buttons: '#dlg-buttons'
			">
		<div id="tt" class="easyui-tabs" style="width:500px;height:250px;">
		    <div title="Tab1" style="padding:20px;selected:true;">
		        <table>
					   <tr><td><input id="comColliery"  class="easyui-combobox" style="width:250px" data-options="
		                valueField: 'id',
		                textField: 'collieryname'"></td></tr>
				</table>
		    </div>
		    <div title="Tab2" data-options="" style="overflow:auto;padding:20px;">
		        <table><tr><td>11111</td></tr></table>
		    </div>
		    <div title="Tab3" data-options="" style="overflow:auto;padding:20px;">
		        <table><tr><td>11111</td></tr></table>
		    </div>
		    <div title="Tab4" data-options="" style="overflow:auto;padding:20px;">
		        <table><tr><td>11111</td></tr></table>
		    </div>
		</div>
	</div>
	<div id="dlg-buttons">
	    <a id="dlg_next" href="javascript:void(0)" class="easyui-linkbutton" onclick="next();">下一步</a>
		<a id="dlg_save" href="javascript:void(0)" class="easyui-linkbutton" onclick="">保存</a>
		<a id="dlg_close" href="javascript:void(0)" class="easyui-linkbutton" onclick="close_win();">关闭</a>			
	</div>
	
	
<script type="text/javascript">

$.extend($.fn.tabs.methods,{
    allTabs:function(jq){
        var tabs = $(jq).tabs('tabs');
        var all = [];
        all = $.map(tabs,function(n,i){
             return $(n).panel('options')
        });
        return all;
    },
    closeCurrent: function(jq){ // 关闭当前
        var currentTab = $(jq).tabs('getSelected'),
            currentTabIndex = $(jq).tabs('getTabIndex',currentTab);
         $(jq).tabs('close',currentTabIndex);
    },
    closeAll:function(jq){ //关闭全部
        var tabs = $(jq).tabs('allTabs');
        $.each(tabs,function(i,n){
            $(jq).tabs('close', n.title);
        })
    },
    closeOther:function(jq){ //关闭除当前标签页外的tab页
        var tabs =$(jq).tabs('allTabs');
        var currentTab = $(jq).tabs('getSelected'),
            currentTabIndex = $(jq).tabs('getTabIndex',currentTab);
 
        $.each(tabs,function(i,n){
            if(currentTabIndex != i) {
                $(jq).tabs('close', n.title);
            }
        })
    },
    closeLeft:function(jq){ // 关闭当前页左侧tab页
        var tabs = $(jq).tabs('allTabs');
        var currentTab = $(jq).tabs('getSelected'),
            currentTabIndex = $(jq).tabs('getTabIndex',currentTab);
        var i = currentTabIndex-1;
 
        while(i > -1){
            $(jq).tabs('close', tabs[i].title);
            i--;
        }
    },
    closeRight: function(jq){ //// 关闭当前页右侧tab页
        var tabs = $(jq).tabs('allTabs');
        var currentTab = $(jq).tabs('getSelected'),
            currentTabIndex = $(jq).tabs('getTabIndex',currentTab);
        var i = currentTabIndex+ 1,len = tabs.length;
        while(i < len){
            $(jq).tabs('close', tabs[i].title);
            i++;
        }
    },
    hideAll:function(jq){ // 隐藏所有的tab页
        var tabs = $(jq).tabs('allTabs');
        $.each(tabs,function(i,n){
            var tab_option =$(jq).tabs('getTab', n.title).panel('options').tab;  
            tab_option.hide();
        })
    },
    hideOther:function(jq){ //隐藏除当前标签页外的tab页
        var tabs =$(jq).tabs('allTabs');
        var currentTab = $(jq).tabs('getSelected'),
            currentTabIndex = $(jq).tabs('getTabIndex',currentTab);
        
        $.each(tabs,function(i,n){
            if(currentTabIndex != i) {
                var tab_option =$(jq).tabs('getTab', n.title).panel('options').tab;  
                tab_option.hide();
            }else{
                var tab_option =$(jq).tabs('getTab', n.title).panel('options').tab;  
                tab_option.show();	
            }
        })
    }
})

bjhdab = {};
bjhdab.colliery = {};
bjhdab.colliery.button_open = $('#open');
bjhdab.colliery.collieryname = $('#comColliery');

$(function(){  
	var url = "BasicInformation/getSelectColliery.action";
	$.getJSON(url, function(json) {
		bjhdab.colliery.collieryname.combobox({data:json});    		
	}); 
});

function open_win(){
	$('#tt').tabs('select',0);//选中第一个
	$('#tt').tabs('hideOther');//初始化，显示第一个tab，隐藏其他
	$('#dlg').dialog('open');
}
function close_win(){
	$('#tt').tabs('select',0);//选中第一个
	$('#tt').tabs('hideOther');//初始化，显示第一个tab，隐藏其他
	$('#dlg').dialog('close');  
}

function next(num){
	var tab = $('#tt').tabs('getSelected');
	var index = $('#tt').tabs('getTabIndex',tab);
	if (index==0){
		$('#tt').tabs('select',1);
		$('#tt').tabs('hideOther');
          
	}else if (index==1){
		$('#tt').tabs('select',2);
		$('#tt').tabs('hideOther');
		
	}else if (index==2){
		$('#tt').tabs('select',3);
		$('#tt').tabs('hideOther');
		$('#dlg_next').hide();
	}else if (index==3){
		
		alert(index);
	}
}
function div_next(){
	
	//$("#panel_truck>div:visible");
	$("#div_truck_1").fadeOut();
	$("#div_truck_2").fadeOut();
	$("#div_truck_3").fadeOut();
	var div_child = $("#panel_truck div:hidden");
	for (var i = 1; i < $("#panel_truck").children("div").length; i++) {
		$("#panel_truck").find()
    }
}
function div_show(){
	$("#div_truck_1").fadeIn();
	$("#div_truck_2").fadeIn();
	$("#div_truck_3").fadeIn();
}

</script>
</body>
</html>